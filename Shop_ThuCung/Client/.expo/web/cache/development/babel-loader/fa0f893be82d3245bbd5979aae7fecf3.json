{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport firebase from 'firebase/compat/app';\nimport 'firebase/compat/auth';\nimport 'firebase/compat/firestore';\nimport React, { useState } from 'react';\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { Snackbar } from 'react-native-paper';\nimport { container, form } from \"../components/Styles/styles\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar Pet_LOGO = \"https://bizweb.dktcdn.net/100/147/060/files/petshop.jpg?v=1479734120094\";\nexport default function Register(props) {\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      email = _useState2[0],\n      setEmail = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      password = _useState4[0],\n      setPassword = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      name = _useState6[0],\n      setName = _useState6[1];\n\n  var _useState7 = useState(''),\n      _useState8 = _slicedToArray(_useState7, 2),\n      username = _useState8[0],\n      setUsername = _useState8[1];\n\n  var _useState9 = useState(true),\n      _useState10 = _slicedToArray(_useState9, 2),\n      isValid = _useState10[0],\n      setIsValid = _useState10[1];\n\n  var onRegister = function onRegister() {\n    if (name.lenght == 0 || username.lenght == 0 || email.length == 0 || password.length == 0) {\n      setIsValid({\n        bool: true,\n        boolSnack: true,\n        message: \"Please fill out everything\"\n      });\n      return;\n    }\n\n    if (password.length < 6) {\n      setIsValid({\n        bool: true,\n        boolSnack: true,\n        message: \"passwords must be at least 6 characters\"\n      });\n      return;\n    }\n\n    if (password.length < 6) {\n      setIsValid({\n        bool: true,\n        boolSnack: true,\n        message: \"passwords must be at least 6 characters\"\n      });\n      return;\n    }\n\n    firebase.firestore().collection('users').where('username', '==', username).get().then(function (snapshot) {\n      if (!snapshot.exist) {\n        firebase.auth().createUserWithEmailAndPassword(email, password).then(function (result) {\n          if (snapshot.exist) {\n            return;\n          }\n\n          firebase.firestore().collection(\"users\").doc(firebase.auth().currentUser.uid).set({\n            name: name,\n            email: email,\n            username: username,\n            imageURL: 'https://blog.cpanel.com/wp-content/uploads/2019/08/user-01.png',\n            phone: '',\n            address: '',\n            birthday: ''\n          });\n          console.log(result);\n        }).catch(function (error) {\n          setIsValid({\n            bool: true,\n            boolSnack: true,\n            message: \"Something went wrong\"\n          });\n          console.log(error);\n        });\n      }\n    }).catch(function () {\n      setIsValid({\n        bool: true,\n        boolSnack: true,\n        message: \"Something went wrong\"\n      });\n    });\n  };\n\n  return _jsxs(View, {\n    style: container.center,\n    children: [_jsx(View, {\n      style: styles.logoContainer,\n      children: _jsx(Image, {\n        source: {\n          uri: Pet_LOGO,\n          height: 100,\n          width: \"100%\"\n        }\n      })\n    }), _jsxs(View, {\n      style: container.formCenter,\n      children: [_jsx(TextInput, {\n        style: form.textInput,\n        placeholder: \"Username\",\n        value: username,\n        keyboardType: \"twitter\",\n        onChangeText: function onChangeText(username) {\n          return setUsername(username.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\").replace(/\\s+/g, '').replace(/[^a-z0-9]/gi, ''));\n        }\n      }), _jsx(TextInput, {\n        style: form.textInput,\n        placeholder: \"name\",\n        onChangeText: function onChangeText(name) {\n          return setName(name);\n        }\n      }), _jsx(TextInput, {\n        style: form.textInput,\n        placeholder: \"email\",\n        onChangeText: function onChangeText(email) {\n          return setEmail(email);\n        }\n      }), _jsx(TextInput, {\n        style: form.textInput,\n        placeholder: \"password\",\n        secureTextEntry: true,\n        onChangeText: function onChangeText(password) {\n          return setPassword(password);\n        }\n      }), _jsx(Button, {\n        style: form.button,\n        onPress: function onPress() {\n          return onRegister();\n        },\n        title: \"Register\"\n      })]\n    }), _jsx(View, {\n      style: form.bottomButton,\n      children: _jsx(Text, {\n        onPress: function onPress() {\n          return props.navigation.navigate(\"Login\");\n        },\n        children: \"Already have an account? SignIn.\"\n      })\n    }), _jsx(Snackbar, {\n      visible: isValid.boolSnack,\n      duration: 100,\n      onDismiss: function onDismiss() {\n        setIsValid({\n          boolSnack: false\n        });\n      },\n      children: isValid.message\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  logoContainer: {\n    height: 250,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  logo: {\n    width: 200,\n    height: 200\n  }\n});","map":{"version":3,"names":["firebase","React","useState","Snackbar","container","form","Pet_LOGO","Register","props","email","setEmail","password","setPassword","name","setName","username","setUsername","isValid","setIsValid","onRegister","lenght","length","bool","boolSnack","message","firestore","collection","where","get","then","snapshot","exist","auth","createUserWithEmailAndPassword","result","doc","currentUser","uid","set","imageURL","phone","address","birthday","console","log","catch","error","center","styles","logoContainer","uri","height","width","formCenter","textInput","normalize","replace","button","bottomButton","navigation","navigate","StyleSheet","create","flexDirection","alignItems","justifyContent","logo"],"sources":["C:/Users/ASUS/OneDrive/Máy tính/New folder/liu/Shop_ThuCung/Client/FirebaseAuth/Register.js"],"sourcesContent":["import firebase from 'firebase/compat/app';\r\nimport 'firebase/compat/auth';\r\nimport 'firebase/compat/firestore';\r\nimport React, { useState } from 'react';\r\nimport { Button, Text, TextInput, View, StyleSheet, Image } from 'react-native';\r\nimport { Snackbar } from 'react-native-paper';\r\nimport { container, form } from '../components/Styles/styles';\r\n\r\nconst Pet_LOGO =\r\n  \"https://bizweb.dktcdn.net/100/147/060/files/petshop.jpg?v=1479734120094\";\r\n\r\nexport default function Register(props) {\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [name, setName] = useState('');\r\n    const [username, setUsername] = useState('');\r\n    const [isValid, setIsValid] = useState(true);\r\n\r\n    const onRegister = () => {\r\n        if (name.lenght == 0 || username.lenght == 0 || email.length == 0 || password.length == 0) {\r\n            setIsValid({ bool: true, boolSnack: true, message: \"Please fill out everything\" })\r\n            return;\r\n        }\r\n        if (password.length < 6) {\r\n            setIsValid({ bool: true, boolSnack: true, message: \"passwords must be at least 6 characters\" })\r\n            return;\r\n        }\r\n        if (password.length < 6) {\r\n            setIsValid({ bool: true, boolSnack: true, message: \"passwords must be at least 6 characters\" })\r\n            return;\r\n        }\r\n        firebase.firestore()\r\n            .collection('users')\r\n            .where('username', '==', username)\r\n            .get()\r\n            .then((snapshot) => {\r\n\r\n                if (!snapshot.exist) {\r\n                    firebase.auth().createUserWithEmailAndPassword(email, password)\r\n                        .then((result) => {\r\n                            if (snapshot.exist) {\r\n                                return\r\n                            }\r\n                            firebase.firestore().collection(\"users\")\r\n                                .doc(firebase.auth().currentUser.uid)\r\n                                .set({\r\n                                    name,\r\n                                    email,\r\n                                    username,\r\n                                    imageURL: 'https://blog.cpanel.com/wp-content/uploads/2019/08/user-01.png',\r\n                                    phone: '',\r\n                                    address: '',\r\n                                    birthday: ''\r\n                                })\r\n                            console.log(result)\r\n                        })\r\n                        .catch((error) => {\r\n                            setIsValid({ bool: true, boolSnack: true, message: \"Something went wrong\" })\r\n                            console.log(error)\r\n                        })\r\n                }\r\n            }).catch(() => {\r\n                setIsValid({ bool: true, boolSnack: true, message: \"Something went wrong\" })\r\n            })\r\n\r\n    }\r\n\r\n    return (\r\n        <View style={container.center}>\r\n            <View style={styles.logoContainer}>\r\n                <Image source={{ uri: Pet_LOGO, height: 100, width: \"100%\" }} />\r\n            </View>\r\n\r\n            <View style={container.formCenter}>\r\n                <TextInput\r\n                    style={form.textInput}\r\n                    placeholder=\"Username\"\r\n                    value={username}\r\n                    keyboardType=\"twitter\"\r\n                    onChangeText={(username) => setUsername(username.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\").replace(/\\s+/g, '').replace(/[^a-z0-9]/gi, ''))}\r\n                />\r\n                <TextInput\r\n                    style={form.textInput}\r\n                    placeholder=\"name\"\r\n                   \r\n                    onChangeText={(name) => setName(name)}\r\n                />\r\n                <TextInput\r\n                    style={form.textInput}\r\n                    placeholder=\"email\"\r\n                  \r\n                    onChangeText={(email) => setEmail(email)}\r\n                    \r\n                />\r\n                <TextInput\r\n                    style={form.textInput}\r\n                    placeholder=\"password\"\r\n                    secureTextEntry={true}\r\n                    onChangeText={(password) => setPassword(password)}\r\n                />\r\n\r\n                <Button\r\n                    style={form.button}\r\n                    onPress={() => onRegister()}\r\n                    title=\"Register\"\r\n                />\r\n            </View>\r\n\r\n            <View style={form.bottomButton} >\r\n                <Text\r\n                    onPress={() => props.navigation.navigate(\"Login\")} >\r\n                    Already have an account? SignIn.\r\n                </Text>\r\n            </View>\r\n            <Snackbar\r\n                visible={isValid.boolSnack}\r\n                duration={100}\r\n                onDismiss={() => { setIsValid({ boolSnack: false }) }}>\r\n                {isValid.message}\r\n            </Snackbar>\r\n        </View>\r\n\r\n    )\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    logoContainer: {\r\n        height: 250,\r\n        flexDirection: 'row',\r\n        alignItems: 'center',\r\n        justifyContent: 'center'\r\n    },\r\n    logo: {\r\n        width: 200,\r\n        height: 200\r\n    }\r\n})\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}