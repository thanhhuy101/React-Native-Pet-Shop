{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport firebase from 'firebase/compat/app';\nimport 'firebase/compat/auth';\nimport 'firebase/compat/firestore';\nimport React, { useState } from 'react';\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { Snackbar } from 'react-native-paper';\nimport { container, form } from \"../components/Styles/styles\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar Pet_LOGO = \"https://bizweb.dktcdn.net/100/147/060/files/petshop.jpg?v=1479734120094\";\nexport default function Register(props) {\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    email = _useState2[0],\n    setEmail = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    password = _useState4[0],\n    setPassword = _useState4[1];\n  var _useState5 = useState(''),\n    _useState6 = _slicedToArray(_useState5, 2),\n    name = _useState6[0],\n    setName = _useState6[1];\n  var _useState7 = useState(''),\n    _useState8 = _slicedToArray(_useState7, 2),\n    username = _useState8[0],\n    setUsername = _useState8[1];\n  var _useState9 = useState(true),\n    _useState10 = _slicedToArray(_useState9, 2),\n    isValid = _useState10[0],\n    setIsValid = _useState10[1];\n  var onRegister = function onRegister() {\n    if (name.lenght == 0 || username.lenght == 0 || email.length == 0 || password.length == 0) {\n      setIsValid({\n        bool: true,\n        boolSnack: true,\n        message: \"Please fill out everything\"\n      });\n      return;\n    }\n    if (password.length < 6) {\n      setIsValid({\n        bool: true,\n        boolSnack: true,\n        message: \"passwords must be at least 6 characters\"\n      });\n      return;\n    }\n    if (password.length < 6) {\n      setIsValid({\n        bool: true,\n        boolSnack: true,\n        message: \"passwords must be at least 6 characters\"\n      });\n      return;\n    }\n    firebase.firestore().collection('users').where('username', '==', username).get().then(function (snapshot) {\n      if (!snapshot.exist) {\n        firebase.auth().createUserWithEmailAndPassword(email, password).then(function (result) {\n          if (snapshot.exist) {\n            return;\n          }\n          firebase.firestore().collection(\"users\").doc(firebase.auth().currentUser.uid).set({\n            name: name,\n            email: email,\n            username: username,\n            imageURL: 'https://blog.cpanel.com/wp-content/uploads/2019/08/user-01.png',\n            phone: '',\n            address: '',\n            birthday: ''\n          });\n          console.log(result);\n        }).catch(function (error) {\n          setIsValid({\n            bool: true,\n            boolSnack: true,\n            message: \"Something went wrong\"\n          });\n          console.log(error);\n        });\n      }\n    }).catch(function () {\n      setIsValid({\n        bool: true,\n        boolSnack: true,\n        message: \"Something went wrong\"\n      });\n    });\n  };\n  return _jsxs(View, {\n    style: container.center,\n    children: [_jsx(View, {\n      style: styles.logoContainer,\n      children: _jsx(Image, {\n        source: {\n          uri: Pet_LOGO,\n          height: 100,\n          width: \"100%\"\n        }\n      })\n    }), _jsxs(View, {\n      style: container.formCenter,\n      children: [_jsx(TextInput, {\n        style: form.textInput,\n        placeholder: \"Username\",\n        value: username,\n        keyboardType: \"twitter\",\n        onChangeText: function onChangeText(username) {\n          return setUsername(username.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\").replace(/\\s+/g, '').replace(/[^a-z0-9]/gi, ''));\n        }\n      }), _jsx(TextInput, {\n        style: form.textInput,\n        placeholder: \"name\",\n        onChangeText: function onChangeText(name) {\n          return setName(name);\n        }\n      }), _jsx(TextInput, {\n        style: form.textInput,\n        placeholder: \"email\",\n        onChangeText: function onChangeText(email) {\n          return setEmail(email);\n        }\n      }), _jsx(TextInput, {\n        style: form.textInput,\n        placeholder: \"password\",\n        secureTextEntry: true,\n        onChangeText: function onChangeText(password) {\n          return setPassword(password);\n        }\n      }), _jsx(Button, {\n        style: form.button,\n        onPress: function onPress() {\n          return onRegister();\n        },\n        title: \"Register\"\n      })]\n    }), _jsx(View, {\n      style: form.bottomButton,\n      children: _jsx(Text, {\n        onPress: function onPress() {\n          return props.navigation.navigate(\"Login\");\n        },\n        children: \"Already have an account? SignIn.\"\n      })\n    }), _jsx(Snackbar, {\n      visible: isValid.boolSnack,\n      duration: 100,\n      onDismiss: function onDismiss() {\n        setIsValid({\n          boolSnack: false\n        });\n      },\n      children: isValid.message\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  logoContainer: {\n    height: 250,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  logo: {\n    width: 200,\n    height: 200\n  }\n});","map":{"version":3,"names":["firebase","React","useState","Snackbar","container","form","Pet_LOGO","Register","props","email","setEmail","password","setPassword","name","setName","username","setUsername","isValid","setIsValid","onRegister","lenght","length","bool","boolSnack","message","firestore","collection","where","get","then","snapshot","exist","auth","createUserWithEmailAndPassword","result","doc","currentUser","uid","set","imageURL","phone","address","birthday","console","log","catch","error","center","styles","logoContainer","uri","height","width","formCenter","textInput","normalize","replace","button","bottomButton","navigation","navigate","StyleSheet","create","flexDirection","alignItems","justifyContent","logo"],"sources":["D:/PhatTrienUngDungMobile/Project/Final/Shops_Pet/Shops_Pet/FirebaseAuth/Register.js"],"sourcesContent":["import firebase from 'firebase/compat/app';\r\nimport 'firebase/compat/auth';\r\nimport 'firebase/compat/firestore';\r\nimport React, { useState } from 'react';\r\nimport { Button, Text, TextInput, View, StyleSheet, Image } from 'react-native';\r\nimport { Snackbar } from 'react-native-paper';\r\nimport { container, form } from '../components/Styles/styles';\r\n\r\nconst Pet_LOGO =\r\n  \"https://bizweb.dktcdn.net/100/147/060/files/petshop.jpg?v=1479734120094\";\r\n\r\nexport default function Register(props) {\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [name, setName] = useState('');\r\n    const [username, setUsername] = useState('');\r\n    const [isValid, setIsValid] = useState(true);\r\n\r\n    const onRegister = () => {\r\n        if (name.lenght == 0 || username.lenght == 0 || email.length == 0 || password.length == 0) {\r\n            setIsValid({ bool: true, boolSnack: true, message: \"Please fill out everything\" })\r\n            return;\r\n        }\r\n        if (password.length < 6) {\r\n            setIsValid({ bool: true, boolSnack: true, message: \"passwords must be at least 6 characters\" })\r\n            return;\r\n        }\r\n        if (password.length < 6) {\r\n            setIsValid({ bool: true, boolSnack: true, message: \"passwords must be at least 6 characters\" })\r\n            return;\r\n        }\r\n        firebase.firestore()\r\n            .collection('users')\r\n            .where('username', '==', username)\r\n            .get()\r\n            .then((snapshot) => {\r\n\r\n                if (!snapshot.exist) {\r\n                    firebase.auth().createUserWithEmailAndPassword(email, password)\r\n                        .then((result) => {\r\n                            if (snapshot.exist) {\r\n                                return\r\n                            }\r\n                            firebase.firestore().collection(\"users\")\r\n                                .doc(firebase.auth().currentUser.uid)\r\n                                .set({\r\n                                    name,\r\n                                    email,\r\n                                    username,\r\n                                    imageURL: 'https://blog.cpanel.com/wp-content/uploads/2019/08/user-01.png',\r\n                                    phone: '',\r\n                                    address: '',\r\n                                    birthday: ''\r\n                                })\r\n                            console.log(result)\r\n                        })\r\n                        .catch((error) => {\r\n                            setIsValid({ bool: true, boolSnack: true, message: \"Something went wrong\" })\r\n                            console.log(error)\r\n                        })\r\n                }\r\n            }).catch(() => {\r\n                setIsValid({ bool: true, boolSnack: true, message: \"Something went wrong\" })\r\n            })\r\n\r\n    }\r\n\r\n    return (\r\n        <View style={container.center}>\r\n            <View style={styles.logoContainer}>\r\n                <Image source={{ uri: Pet_LOGO, height: 100, width: \"100%\" }} />\r\n            </View>\r\n\r\n            <View style={container.formCenter}>\r\n                <TextInput\r\n                    style={form.textInput}\r\n                    placeholder=\"Username\"\r\n                    value={username}\r\n                    keyboardType=\"twitter\"\r\n                    onChangeText={(username) => setUsername(username.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\").replace(/\\s+/g, '').replace(/[^a-z0-9]/gi, ''))}\r\n                />\r\n                <TextInput\r\n                    style={form.textInput}\r\n                    placeholder=\"name\"\r\n                   \r\n                    onChangeText={(name) => setName(name)}\r\n                />\r\n                <TextInput\r\n                    style={form.textInput}\r\n                    placeholder=\"email\"\r\n                  \r\n                    onChangeText={(email) => setEmail(email)}\r\n                    \r\n                />\r\n                <TextInput\r\n                    style={form.textInput}\r\n                    placeholder=\"password\"\r\n                    secureTextEntry={true}\r\n                    onChangeText={(password) => setPassword(password)}\r\n                />\r\n\r\n                <Button\r\n                    style={form.button}\r\n                    onPress={() => onRegister()}\r\n                    title=\"Register\"\r\n                />\r\n            </View>\r\n\r\n            <View style={form.bottomButton} >\r\n                <Text\r\n                    onPress={() => props.navigation.navigate(\"Login\")} >\r\n                    Already have an account? SignIn.\r\n                </Text>\r\n            </View>\r\n            <Snackbar\r\n                visible={isValid.boolSnack}\r\n                duration={100}\r\n                onDismiss={() => { setIsValid({ boolSnack: false }) }}>\r\n                {isValid.message}\r\n            </Snackbar>\r\n        </View>\r\n\r\n    )\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    logoContainer: {\r\n        height: 250,\r\n        flexDirection: 'row',\r\n        alignItems: 'center',\r\n        justifyContent: 'center'\r\n    },\r\n    logo: {\r\n        width: 200,\r\n        height: 200\r\n    }\r\n})\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}